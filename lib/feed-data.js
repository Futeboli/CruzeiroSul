export const MOCK_FEED_POSTS = [
  {
    id: "post1",
    ngoId: "ngo1",
    ngoName: "Instituto Alimentar",
    ngoAvatar: "/food-institute-logo.jpg",
    type: "photo",
    content:
      "Hoje distribuÃ­mos 150 cestas bÃ¡sicas para famÃ­lias da comunidade Vila Nova! Ver o sorriso de gratidÃ£o em cada rosto nos motiva a continuar. Juntos somos mais fortes! ðŸ’š",
    images: ["/community-food-distribution-volunteers.jpg"],
    likes: 234,
    comments: 18,
    shares: 12,
    createdAt: "2025-01-30T14:30:00Z",
    location: "Vila Nova, SÃ£o Paulo - SP",
  },
  {
    id: "post2",
    ngoId: "ngo2",
    ngoName: "TechFuturo",
    ngoAvatar: "/tech-education-logo.jpg",
    type: "photo",
    content:
      "ParabÃ©ns aos nossos alunos que concluÃ­ram o curso de Desenvolvimento Web! ðŸŽ‰ Agora eles estÃ£o prontos para conquistar o mercado de tecnologia. #EducaÃ§Ã£oTransforma",
    images: ["/young-people-learning-programming-computers.jpg"],
    likes: 456,
    comments: 32,
    shares: 28,
    createdAt: "2025-01-30T10:15:00Z",
    location: "Rio de Janeiro - RJ",
  },
  {
    id: "post3",
    ngoId: "ngo4",
    ngoName: "Patinhas Felizes",
    ngoAvatar: "/paw-print-logo.png",
    type: "photo",
    content:
      "ConheÃ§a o Thor! Ele foi resgatado das ruas hÃ¡ 2 meses e agora estÃ¡ pronto para adoÃ§Ã£o. Ã‰ um cachorro dÃ³cil, carinhoso e adora crianÃ§as. Quem quer dar um lar para esse amor? ðŸ•â¤ï¸",
    images: ["/animal-shelter-dogs-cats-volunteers.jpg"],
    likes: 892,
    comments: 67,
    shares: 45,
    createdAt: "2025-01-29T16:45:00Z",
    location: "Belo Horizonte - MG",
  },
  {
    id: "post4",
    ngoId: "ngo3",
    ngoName: "Verde Vivo",
    ngoAvatar: "/green-forest-logo.jpg",
    type: "photo",
    content:
      "MutirÃ£o de plantio neste sÃ¡bado! Plantamos 500 mudas de Ã¡rvores nativas com a ajuda de 45 voluntÃ¡rios incrÃ­veis. A Mata AtlÃ¢ntica agradece! ðŸŒ³ðŸŒ¿",
    images: ["/atlantic-forest-reforestation-planting-trees.jpg"],
    likes: 678,
    comments: 41,
    shares: 56,
    createdAt: "2025-01-29T11:20:00Z",
    location: "Curitiba - PR",
  },
  {
    id: "post5",
    ngoId: "ngo5",
    ngoName: "Rede de Apoio Feminino",
    ngoAvatar: "/women-support-logo.jpg",
    type: "text",
    content:
      "Hoje realizamos mais uma oficina de empoderamento feminino. Ver mulheres redescobrindo sua forÃ§a e autoestima Ã© o que nos move. VocÃª nÃ£o estÃ¡ sozinha! ðŸ’œ #JuntasSomosMaisFortes",
    images: ["/women-empowerment-support-group.jpg"],
    likes: 543,
    comments: 38,
    shares: 34,
    createdAt: "2025-01-28T15:30:00Z",
    location: "Salvador - BA",
  },
  {
    id: "post6",
    ngoId: "ngo6",
    ngoName: "Esporte para Todos",
    ngoAvatar: "/sports-ball-logo.jpg",
    type: "photo",
    content:
      "Final do campeonato de futebol! As crianÃ§as deram um show de talento e fair play. O esporte transforma vidas! âš½ðŸ†",
    images: ["/children-playing-sports-soccer-community.jpg"],
    likes: 321,
    comments: 24,
    shares: 19,
    createdAt: "2025-01-28T09:00:00Z",
    location: "Recife - PE",
  },
  {
    id: "post7",
    ngoId: "ngo1",
    ngoName: "Instituto Alimentar",
    ngoAvatar: "/food-institute-logo.jpg",
    type: "text",
    content:
      "Precisamos de voluntÃ¡rios para o mutirÃ£o de distribuiÃ§Ã£o deste sÃ¡bado! Se vocÃª tem algumas horas disponÃ­veis e quer fazer a diferenÃ§a, entre em contato. Cada ajuda conta! ðŸ™",
    images: [],
    likes: 167,
    comments: 29,
    shares: 41,
    createdAt: "2025-01-27T13:45:00Z",
    location: "SÃ£o Paulo - SP",
  },
  {
    id: "post8",
    ngoId: "ngo2",
    ngoName: "TechFuturo",
    ngoAvatar: "/tech-education-logo.jpg",
    type: "photo",
    content:
      "Aula prÃ¡tica de desenvolvimento de apps! Nossos alunos estÃ£o criando soluÃ§Ãµes incrÃ­veis para problemas reais da comunidade. ðŸ“±ðŸ’¡",
    images: ["/students-learning-technology.png"],
    likes: 412,
    comments: 26,
    shares: 22,
    createdAt: "2025-01-27T10:30:00Z",
    location: "Rio de Janeiro - RJ",
  },
  {
    id: "post9",
    ngoId: "ngo4",
    ngoName: "Patinhas Felizes",
    ngoAvatar: "/paw-print-logo.png",
    type: "text",
    content:
      "Campanha de castraÃ§Ã£o gratuita neste fim de semana! Vagas limitadas. Ajude a controlar a populaÃ§Ã£o de animais de rua de forma responsÃ¡vel. ðŸ¾",
    images: [],
    likes: 445,
    comments: 52,
    shares: 67,
    createdAt: "2025-01-26T14:00:00Z",
    location: "Belo Horizonte - MG",
  },
  {
    id: "post10",
    ngoId: "ngo3",
    ngoName: "Verde Vivo",
    ngoAvatar: "/green-forest-logo.jpg",
    type: "photo",
    content:
      "As mudas plantadas hÃ¡ 6 meses jÃ¡ estÃ£o crescendo fortes! Ã‰ emocionante ver a natureza se recuperando. ðŸŒ±âœ¨",
    images: ["/forest-conservation-nature.jpg"],
    likes: 589,
    comments: 33,
    shares: 28,
    createdAt: "2025-01-26T08:15:00Z",
    location: "Curitiba - PR",
  },
]

export function getFeedPosts() {
  const stored = localStorage.getItem("ngo_hub_feed_posts")
  if (stored) {
    try {
      return JSON.parse(stored)
    } catch (error) {
      console.error("[v0] Erro ao carregar posts do feed:", error)
    }
  }
  localStorage.setItem("ngo_hub_feed_posts", JSON.stringify(MOCK_FEED_POSTS))
  return MOCK_FEED_POSTS
}

export function getPostById(id) {
  const posts = getFeedPosts()
  return posts.find((p) => p.id === id)
}

export function getPostsByNGO(ngoId) {
  const posts = getFeedPosts()
  return posts.filter((p) => p.ngoId === ngoId)
}

export function likeFeedPost(postId, userId) {
  const posts = getFeedPosts()
  const postIndex = posts.findIndex((p) => p.id === postId)

  if (postIndex !== -1) {
    const likes = JSON.parse(localStorage.getItem("ngo_hub_feed_likes") || "{}")
    const userLikes = likes[userId] || []

    if (userLikes.includes(postId)) {
      likes[userId] = userLikes.filter((id) => id !== postId)
      posts[postIndex].likes -= 1
    } else {
      likes[userId] = [...userLikes, postId]
      posts[postIndex].likes += 1
    }

    localStorage.setItem("ngo_hub_feed_likes", JSON.stringify(likes))
    localStorage.setItem("ngo_hub_feed_posts", JSON.stringify(posts))

    return posts[postIndex]
  }

  return null
}

export function hasUserLikedPost(postId, userId) {
  const likes = JSON.parse(localStorage.getItem("ngo_hub_feed_likes") || "{}")
  const userLikes = likes[userId] || []
  return userLikes.includes(postId)
}

export function addFeedComment(postId, userId, userName, text) {
  const comments = JSON.parse(localStorage.getItem("ngo_hub_feed_comments") || "{}")
  const postComments = comments[postId] || []

  const newComment = {
    id: Date.now().toString(),
    userId,
    userName,
    text,
    createdAt: new Date().toISOString(),
  }

  comments[postId] = [...postComments, newComment]
  localStorage.setItem("ngo_hub_feed_comments", JSON.stringify(comments))

  const posts = getFeedPosts()
  const postIndex = posts.findIndex((p) => p.id === postId)
  if (postIndex !== -1) {
    posts[postIndex].comments += 1
    localStorage.setItem("ngo_hub_feed_posts", JSON.stringify(posts))
  }

  return newComment
}

export function getFeedComments(postId) {
  const comments = JSON.parse(localStorage.getItem("ngo_hub_feed_comments") || "{}")
  return comments[postId] || []
}
